{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/jeffrywainwright/logsdx/main/schema.json",
  "title": "LogsDX Theme Schema",
  "description": "Schema for defining LogsDX themes that provide consistent log styling between terminal and browser",
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "description": "Unique identifier for the theme",
      "examples": ["my-custom-theme", "api-logs", "terminal-hacker"]
    },
    "description": {
      "type": "string", 
      "description": "Human-readable description of the theme",
      "examples": ["Theme optimized for API logs", "Dark theme with green terminal colors"]
    },
    "schema": {
      "type": "object",
      "description": "Core schema configuration that defines how logs are styled",
      "properties": {
        "defaultStyle": {
          "$ref": "#/$defs/styleOptions",
          "description": "Default styling applied to unmatched content"
        },
        "matchWords": {
          "type": "object",
          "description": "Exact word matching for styling specific terms",
          "patternProperties": {
            "^.*$": {
              "$ref": "#/$defs/styleOptions"
            }
          },
          "examples": [{
            "ERROR": { "color": "red", "styleCodes": ["bold"] },
            "GET": { "color": "blue" },
            "200": { "color": "green", "styleCodes": ["bold"] }
          }]
        },
        "matchStartsWith": {
          "type": "object", 
          "description": "Match content that starts with specific strings",
          "patternProperties": {
            "^.*$": {
              "$ref": "#/$defs/styleOptions"
            }
          }
        },
        "matchEndsWith": {
          "type": "object",
          "description": "Match content that ends with specific strings", 
          "patternProperties": {
            "^.*$": {
              "$ref": "#/$defs/styleOptions"
            }
          }
        },
        "matchContains": {
          "type": "object",
          "description": "Match content that contains specific strings",
          "patternProperties": {
            "^.*$": {
              "$ref": "#/$defs/styleOptions"
            }
          }
        },
        "matchPatterns": {
          "type": "array",
          "description": "Regex patterns for advanced content matching",
          "items": {
            "$ref": "#/$defs/patternMatch"
          },
          "examples": [[
            {
              "name": "url-path",
              "pattern": "/[a-zA-Z0-9/_-]+",
              "options": { "color": "blue", "styleCodes": ["italic"] }
            },
            {
              "name": "ip-address", 
              "pattern": "\\b(?:[0-9]{1,3}\\.){3}[0-9]{1,3}\\b",
              "options": { "color": "cyan", "styleCodes": ["bold"] }
            }
          ]]
        },
        "whiteSpace": {
          "type": "string",
          "enum": ["preserve", "trim"],
          "default": "preserve",
          "description": "How to handle whitespace in logs"
        },
        "newLine": {
          "type": "string", 
          "enum": ["preserve", "trim"],
          "default": "preserve",
          "description": "How to handle newlines in logs"
        }
      },
      "additionalProperties": false
    }
  },
  "required": ["name", "schema"],
  "additionalProperties": false,
  "$defs": {
    "styleOptions": {
      "type": "object",
      "description": "Styling configuration for matched content",
      "properties": {
        "color": {
          "type": "string",
          "description": "Text color (named color, hex, rgb, or theme color reference)",
          "examples": ["red", "#ff0000", "rgb(255,0,0)", "error", "primary"]
        },
        "styleCodes": {
          "type": "array",
          "description": "Array of style modifiers to apply",
          "items": {
            "type": "string",
            "enum": ["bold", "italic", "underline", "dim", "blink", "reverse", "strikethrough"]
          },
          "examples": [["bold"], ["italic", "underline"], ["bold", "dim"]]
        },
        "htmlStyleFormat": {
          "type": "string",
          "enum": ["css", "className"],
          "description": "How to output HTML styles (inline CSS or CSS classes)"
        }
      },
      "required": ["color"],
      "additionalProperties": false
    },
    "patternMatch": {
      "type": "object",
      "description": "Regex pattern with associated styling",
      "properties": {
        "name": {
          "type": "string",
          "description": "Unique identifier for this pattern",
          "examples": ["timestamp", "url", "ip-address", "json-key"]
        },
        "pattern": {
          "type": "string",
          "description": "Regular expression pattern to match",
          "examples": [
            "\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}",
            "/[a-zA-Z0-9/_-]+", 
            "\\b(?:[0-9]{1,3}\\.){3}[0-9]{1,3}\\b"
          ]
        },
        "options": {
          "$ref": "#/$defs/styleOptions",
          "description": "Styling to apply to matches of this pattern"
        }
      },
      "required": ["name", "pattern", "options"],
      "additionalProperties": false
    }
  },
  "examples": [
    {
      "name": "api-logs",
      "description": "Theme optimized for API request/response logs",
      "schema": {
        "defaultStyle": {
          "color": "#212529"
        },
        "matchWords": {
          "GET": { "color": "#007acc" },
          "POST": { "color": "#17a2b8" },
          "ERROR": { "color": "#dc3545", "styleCodes": ["bold"] },
          "200": { "color": "#28a745", "styleCodes": ["bold"] },
          "404": { "color": "#ffc107", "styleCodes": ["bold"] },
          "500": { "color": "#dc3545", "styleCodes": ["bold", "underline"] }
        },
        "matchPatterns": [
          {
            "name": "url-path",
            "pattern": "/[a-zA-Z0-9/_-]+",
            "options": { "color": "#28a745", "styleCodes": ["italic"] }
          },
          {
            "name": "ip-address",
            "pattern": "\\b(?:[0-9]{1,3}\\.){3}[0-9]{1,3}\\b", 
            "options": { "color": "#17a2b8", "styleCodes": ["bold"] }
          },
          {
            "name": "response-time",
            "pattern": "\\d+ms",
            "options": { "color": "#ffc107" }
          }
        ],
        "whiteSpace": "preserve",
        "newLine": "preserve"
      }
    }
  ]
}